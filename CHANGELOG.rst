Changelog
=========

This changelog follows the great advice from https://keepachangelog.com/.

Each section will have a title of the format ``X.Y.Z (YYYY-MM-DD)`` giving the version of the package and the date of release of that version. Unreleased changes i.e. those that have been merged into master (e.g. with a .dev suffix) but which are not yet in a new release (on PyPI) are added to the changelog but with the title ``X.Y.Z (unreleased)``. Unreleased sections can be combined when they are released and the date of release added to the title.

Subsections for each version can be one of the following;

- ``Added`` for new features.
- ``Changed`` for changes in existing functionality.
- ``Deprecated`` for soon-to-be removed features.
- ``Removed`` for now removed features.
- ``Fixed`` for any bug fixes.
- ``Security`` in case of vulnerabilities.

Each individual change should have a link to the pull request after the description of the change.

0.3.0 (unreleased) `#25 <https://github.com/richardangell/tabular-trees/pull/25>`_ `#19 <https://github.com/richardangell/tabular-trees/pull/19>`_
---------------------------------------------------------------------------------------

Added
^^^^^
- Add ``EditableBooster`` class as a way to edit ``lgb.Booster`` models
- Add BoosterString to help converting back and forth between ``lgb.Booster`` and ``EditableBooster``
- Add notes to docs echoing warnings generated from package
- Add ``pytest.ini`` to filter out warnings generated by package
- Add examples to docstrings for main functions / classes
- Add ``--doctest-modules`` run with ``tox``

Changed
^^^^^^^
- Improve tests
- Tests using to ``lightgbm`` or ``xgboost`` are no longer imported if those packages are not installed
- Update ``decompose_prediction`` to use ``pd.concat`` instead of depreceated ``pd.DataFrame.append``
- Rename ``ParsedXGBoostTabularTrees.COLUMNS_MAPPING`` attribute to ``COLUMN_MAPPING``
- Change ``_extract_hist_gbm_tree_data`` to include the starting value in the predictions of the first tree
- Remove unused ``__init__`` method in ``BaseModelTabularTrees``

Fixed
^^^^^
- Fix ``validate_monotonic_constraints`` to correctly loop through all trees in the model

0.2.0 (2023-03-13) `#18 <https://github.com/richardangell/tabular-trees/pull/18>`_
----------------------------------------------------------------------------------

Added
^^^^^

- Add ``XGBoostTabularTrees`` to hold ``xgb.Booster.trees_to_dataframe`` output
- Add ``DumpReader``, ``JsonDumpReader``, ``TextDumpReader`` classes in ``xgboost`` module
- Add ``ParsedXGBoostTabularTrees`` class to hold the outout of parser classes
- Add ``lightgbm`` module
- Add ``LightGBMTabularTrees`` class to hold output from ``lgb.Booster.trees_to_dataframe``
- Add ``export_tree_data`` as the user interface to export tree data for any supported model, dispatching to the correct model specific function
- Add ``sklearn`` module
- Add ``ScikitLearnTabularTrees`` class to hold tree data from ``GradientBoostingClassifier`` or ``GradientBoostingRegressor`` objects
- Add ``ScikitLearnHistTabularTrees`` class to hold tree data from ``HistGradientBoostingClassifier`` or ``HistGradientBoostingRegressor`` objects
- Add support for ``GradientBoostingClassifier`` or ``GradientBoostingRegressor`` with ``export_tree_data``
- Add support for ``HistGradientBoostingClassifier`` or ``HistGradientBoostingRegressor`` with ``export_tree_data``
- Add new ``BaseModelTabularTrees`` abstract base class for model specific tree data class implementations to inherit from
- Add ``convert_to_tabular_trees`` methods to ``LightGBMTabularTrees`` and ``XGBoostTabularTrees`` classes
- Add ``export_tree_data`` support for ``LightGBM`` and ``XBGoost`` ``Booster`` objects
- Add ``MonotonicConstraintResults`` class to hold outputs from ``validate_monotonic_constraints``
- Add ``PredictionDecomposition`` class to hold the outputs from ``decompose_prediction``
- Add ``ShapleyValues`` class to hold the outputs from ``calculate_shapley_values``
- Separate github action workflows to run test ``coverage``, ``pre-commit``, ``tox`` and check required files have changed
- Docs and ``readthedocs`` configuration
- Add ``pre-commit`` with ``black``, ``bandit``, ``mypy``, ``flake8``, ``isort``, ``docformatter`` and ``pydocstyle``
- Add type-hints

Changed
^^^^^^^

- Source code moved to ``src`` directory
- Change package import name to ``tabular_trees`` from ``ttrees``
- Rename ``xgb`` module to ``xgboost``
- Refactor ``xgb.parser`` and move functionality into ``xgboost`` module
- Rename ``validate_monotonic_constraints_df`` function to ``validate_monotonic_constraints``
- Refactor ``validate_monotonic_constraints`` function to accept ``TabularTrees`` objects
- Refactor ``decompose_prediction`` function to accept ``TabularTrees`` objects
- Rename ``shapley_values`` function to ``calculate_shapley_values``
- Refactor ``calculate_shapley_values`` function to accept ``TabularTrees`` objects
- Rename ``xgb.explainer`` module to ``explain``
- Move ``xgb.explain`` submodule out of ``xgboost`` module
- Move ``xgb.validate`` submodule out of ``xgboost`` module
- Project to use ``pyproject.toml`` and ``poetry`` as the build tool
- No longer set package version number in ``_version.py``, use ``pyproject.toml`` as the single source for the version number
- ``LightGBM``, ``Scikit-Learn`` and ``XGBoost`` are now optional extra dependencies
- Improve docstrings
- Update packages to latest versions in ``docs/requirements.txt``
- Update project ``README``
- Update notebooks in ``demo`` folder
- Exclude ``.tox`` directory in ``bandit``
- Dependency matrix in ``tox`` configuration
- Update dependencies in ``tox`` configuration

0.1.4 (2021-02-06)
------------------

- Package before changelog added
